(this["webpackJsonpjavascript-react-snake"]=this["webpackJsonpjavascript-react-snake"]||[]).push([[0],{17:function(t,e,a){},18:function(t,e,a){},19:function(t,e,a){},21:function(t,e,a){"use strict";a.r(e);var n=a(2),r=a.n(n),i=a(8),s=a.n(i),c=(a(17),a(18),a(3)),o=a(5),u=a(9),d=a(10),l=a(1),b=a(12),f=a(11),h=(a(19),a(0)),v=function(t,e){return[Math.ceil(t*Math.random()-1),Math.ceil(e*Math.random()-1)]},j=function(t){Object(b.a)(a,t);var e=Object(f.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={snake:[[10,8],[10,9],[10,10]],fruit:[2,2],dir:"a",run:!1,score:0,best:0,dead:!1},t.teclado=t.teclado.bind(Object(l.a)(t)),t.move=t.move.bind(Object(l.a)(t)),t.reiniciar=t.reiniciar.bind(Object(l.a)(t)),t.atualizar=t.atualizar.bind(Object(l.a)(t)),t.sorteiaFruta=t.sorteiaFruta.bind(Object(l.a)(t)),t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=this;window.addEventListener("keydown",(function(e){return t.teclado(e,!0)})),window.addEventListener("keyup",(function(e){return t.teclado(e,!1)})),this.timer=setInterval(this.atualizar,500)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"move",value:function(t){var e=Object(o.a)(t),a=[0,0];switch(this.state.dir){case"w":a=[0,-1];break;case"s":a=[0,1];break;case"a":a=[-1,0];break;case"d":a=[1,0];break;default:a=[0,0]}var n=Object(c.a)(t[0],2),r=n[0],i=n[1],s=r+a[0],u=i+a[1];return e.unshift([s,u]),e}},{key:"teclado",value:function(t,e){var a=t.key.toLowerCase();if("wasd".includes(a)){var n=Object(o.a)(this.state.snake),r=Object(c.a)(n[0],2),i=r[0],s=r[1],u=Object(c.a)(n[1],2),d=u[0],l=u[1];if("a"===a&&i-1===d)return;if("d"===a&&i+1===d)return;if("w"===a&&s-1===l)return;if("s"===a&&s+1===l)return;this.setState((function(t){var e=t.dead;return{dir:a,run:!e}}))}}},{key:"reiniciar",value:function(){console.log("reiniciar"),this.state.dead&&this.state.score>this.state.best&&this.setState((function(t){var e=t.score;t.best;return{best:e}})),this.state.run||this.setState({snake:[[10,8],[10,9],[10,10]],fruit:[2,2],dir:"a",run:!1,score:0,dead:!1})}},{key:"atualizar",value:function(){var t=this;console.log("atualizar"),this.state.run&&this.setState((function(e){var a=e.snake;return{snake:t.move(a)}}),this.sensores)}},{key:"sensores",value:function(){var t=this,e=this.state.snake,a=Object(c.a)(e[0],2),n=a[0],r=a[1];(n+1>20||n<0||r+1>20||r<0)&&this.setState({dead:!0,run:!1});var i=Object(o.a)(e);i.shift(),i=JSON.stringify(i);var s=JSON.stringify([n,r]);-1!==i.indexOf(s)&&this.setState({dead:!0,run:!1}),n===this.state.fruit[0]&&r===this.state.fruit[1]?this.setState((function(e){var a=e.score,n=e.snake;return{score:a+1,fruit:t.sorteiaFruta(20,20,n)}})):this.setState((function(t){var e=t.snake,a=t.dead,n=Object(o.a)(e);return a?n.shift():n.pop(),{snake:n}}))}},{key:"sorteiaFruta",value:function(t,e,a){for(var n=!1,r=[];!n;)r=v(20,20),a.includes(r)||(n=!0);return r}},{key:"render",value:function(){var t=this.state,e=t.snake,a=t.fruit,n=t.score,r=t.best;return Object(h.jsxs)("section",{className:"Snake",children:[Object(h.jsx)("div",{className:"fruta",style:{left:"".concat(a[0],"rem"),top:"".concat(a[1],"rem")}}),e.map((function(t,e){var a=Object(c.a)(t,2),n=a[0],r=a[1];return Object(h.jsx)("div",{className:"serpenteCorpo",style:{left:"".concat(n,"rem"),top:"".concat(r,"rem")}},e)})),Object(h.jsx)("button",{id:"reiniciar",type:"button",onClick:this.reiniciar,children:"Reiniciar"}),Object(h.jsxs)("p",{id:"score",children:["Score:",n]}),r?Object(h.jsxs)("p",{id:"best",children:["Best:",r]}):null]})}}]),a}(r.a.Component);var k=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(j,{}),Object(h.jsx)("p",{children:"Gabriel Rodrigues Leite \xa9 2021 | use: w a s d"})]})},O=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,22)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,i=e.getLCP,s=e.getTTFB;a(t),n(t),r(t),i(t),s(t)}))};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(k,{})}),document.getElementById("root")),O()}},[[21,1,2]]]);
//# sourceMappingURL=main.1e395dd1.chunk.js.map